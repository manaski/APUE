# APUE
## intro
### 1.4 文件和目录
除了斜线(/)和空格之外，都可以用于文件名；由斜线分隔的多个文件名构成路径名。
```c
ls1.c
输入目录名，输出目录下一级文件名和目录名
```
### 1.5 输入输出
函数open、 read、 write、 lseek以及close提供了不带缓冲的I/O。 这些函数都使用文件描述符
```c
echo.c
按照字节读取和写入，借助于缓冲区
```
标准I/O函数为那些不带缓冲的I/O函数提供了一个带缓冲的接口。 
```c
getcputc.c
按照字符读取和写入
```
### 1.6 程序和进程
程序（program）是一个存储在磁盘上某个目录中的可执行文件。内核使用exec函数（7个exec函数之一），将程序读入内存并执行程序。
```c
getpid.c
获得进程ID
```
### 1.7 出错处理
当UNIX系统函数出错时通常会返回一个负值，而且整型变量errno通常被设置为具有特定信息的值。
而有些函数对于出错则使用另一种约定而不是返回负值，比如返回null指针。

对于errno是一个左值，可以使一个整形或是一个函数指针。

对于errno，第一条规则是：如果没有出错其值不会被例程清除。因此仅当函数的返回值指明出错时才检验其值。 
第二条规则是：任何函数都不会将errno值设置为0，而且在<errno.h>中定义的所有常量都不为0。

```c
//perror.c
    strerror(EAGAIN); //将错误码映射为信息
    perror(argv[0]);  //打印当前errno对应的错误信息
```
致命性错误：无法恢复
非致命错误：通常是临时错误，比如资源问题

### 1.8 用户标识
用户ID为0的用户为根用户.

```c
getuid(), getgid()
```

### 1.9 信号

进程处理信号的方式：
1. 忽略， 2. 按照系统默认方式， 3.调用预设函数

```c
//signal.c
```

### 1.10  时间
时间：
日历时间
进程时间

进程时间包括：
时钟时间又称为墙上时钟时间（wall clock time），它是进程运行的时间总量。
用户CPU时间是执行用户指令所用的时间量。系统CPU时间是为该进程执行内核程序所经历的时间。

### 1.11 系统调用

在Unix中为每个系统调用在标准C库中设置一个具有同名的函数。用户进程用标准C调用序列来调用这些函数，
然后，函数又用系统所要求的技术调用相应的内核服务。

从实现者的角度来看，系统调用和库函数之间有根本的区别，但从用户角度来看其区别并不重要。

系统调用提供最小接口，而库函数可以更复杂。

## 2. unix标准和实现

接口标准化规范包括ISO C, IEEE POSIX, Single Unix Specification

标准中规定了一些限制，包括编译时限制和运行时限制，比如类型范围等

对标准的实现有多种，比如Free BSD, Mac OS, Linux, Solaris等

## 3. 文件IO

### 3.1 文件描述符

对于内核而言，所有打开的文件都通过文件描述符引用。文件描述符是一个非负整数。 

例子: 0表示stdin, 1表示stdout, 2表示stderr.

文件描述符的变化范围是0～OPEN_MAX-1，早期是19，即允许每个进程打开19个文件。
对很多系统来说，文件描述符范围是无限的。
